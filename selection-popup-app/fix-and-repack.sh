#!/bin/bash

echo "====================================="
echo "AI划词助手 - 修复版打包脚本"
echo "====================================="

echo ""
echo "1. 清理旧的打包文件..."
echo "-----------------------------------"
rm -rf dist/

echo ""
echo "2. 重新打包应用..."
echo "-----------------------------------"
npm run dist:win

echo ""
echo "3. 创建修复版压缩包..."
echo "-----------------------------------"
7z a -t7z -mx=9 "AI划词助手-v2.0.1-修复版.7z" dist/win-unpacked/*

echo ""
echo "====================================="
echo "修复版打包完成！"
echo "====================================="
echo ""
echo "修复内容："
echo "- 修复了 globalShortcut 在应用启动前被调用的问题"
echo "- 修复了配置文件路径初始化问题"
echo ""
echo "输出文件："
echo "- AI划词助手-v2.0.1-修复版.7z"
echo ""