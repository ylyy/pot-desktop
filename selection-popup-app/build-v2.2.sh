#!/bin/bash

echo "==========================================="
echo "AI划词助手 v2.2 - 智能划词版打包脚本"
echo "==========================================="

# 更新版本号
sed -i 's/"version": "2.1.0"/"version": "2.2.0"/' package.json

echo ""
echo "1. 清理旧的打包文件..."
echo "-----------------------------------"
rm -rf dist/

echo ""
echo "2. 重新打包应用..."
echo "-----------------------------------"
npm run dist:win

echo ""
echo "3. 创建v2.2版压缩包..."
echo "-----------------------------------"
7z a -t7z -mx=9 "AI划词助手-v2.2.0-智能划词版.7z" dist/win-unpacked/*

echo ""
echo "==========================================="
echo "v2.2.0 智能划词版打包完成！"
echo "==========================================="
echo ""
echo "🎉 新增功能："
echo "- 智能划词：选中文本自动弹出AI按钮"
echo "- 无需按快捷键，直接触发"
echo "- 三种触发模式可选"
echo "- 优化的检测算法，避免误触发"
echo ""
echo "📋 触发方式："
echo "1. 快捷键触发（传统方式）"
echo "2. 智能划词（推荐）"
echo "3. 剪贴板监听"
echo ""
echo "输出文件："
echo "- AI划词助手-v2.2.0-智能划词版.7z"
echo ""