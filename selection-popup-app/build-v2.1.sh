#!/bin/bash

echo "====================================="
echo "AI划词助手 v2.1 - 流式响应版打包脚本"
echo "====================================="

# 更新版本号
sed -i 's/"version": "2.0.1"/"version": "2.1.0"/' package.json

echo ""
echo "1. 清理旧的打包文件..."
echo "-----------------------------------"
rm -rf dist/

echo ""
echo "2. 重新打包应用..."
echo "-----------------------------------"
npm run dist:win

echo ""
echo "3. 创建v2.1版压缩包..."
echo "-----------------------------------"
7z a -t7z -mx=9 "AI划词助手-v2.1.0-流式响应版.7z" dist/win-unpacked/*

echo ""
echo "====================================="
echo "v2.1.0 流式响应版打包完成！"
echo "====================================="
echo ""
echo "新增功能："
echo "- 支持流式响应，实时显示AI回复"
echo "- 新增 Dify API 支持"
echo "- 自定义API支持流式响应选项"
echo "- 优化结果窗口的显示效果"
echo ""
echo "输出文件："
echo "- AI划词助手-v2.1.0-流式响应版.7z"
echo ""